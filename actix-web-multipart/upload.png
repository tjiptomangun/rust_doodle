1. Repo payment gw


Tx History (WalletTrx)
- Referensi ke invoice pakai refnumber atau tidak?
- Apakah perlu foreign key ? Ngga perlu, toh akan dilihat satu per satu
- Notes pada WalletTrx akan berisi item_name untuk view aja
- SubTType (0 = undefined, 1 = Token Listrik, 2 = Pulsa Telpon)
- Di design ada jenis akun (source -> DOI Account dan dest - Bank Mandiri), dimana di isi nya?  (outstanding)
- Di invoice and send to , untuk apa? Di MOM ngga disebut. Apa yang di send?


Outstanding
- Di design ada jenis akun (source -> DOI Account dan dest - Bank Mandiri), dimana di isi nya?
- Kalau bank/gopay/ovo, apakah daftar karyawan dan daftar nasabah ditaruh di table yang sama? Dipisah aja, ngga perlu role-role an
-

try: git rebase -i --root (https://stackoverflow.com/questions/33911379/git-rebase-fatal-needed-a-single-revision-invalid-upstream-i/33911409)


CREATE TABLE IF NOT EXISTS wallet (
  id                BIGSERIAL PRIMARY KEY NOT NULL,
  passhash          VARCHAR(255)          NOT NULL UNIQUE,
  owner_name        VARCHAR(255)          NOT NULL,
  phone_no          VARCHAR(40)           NOT NULL,
  email             VARCHAR(255),
  balance           NUMERIC(15,6)         NOT NULL,
  hashcode          VARCHAR(255)          UNIQUE NOT NULL, --hash to identify this user
  created_ts        TIMESTAMP             NOT NULL DEFAULT (now() AT TIME ZONE 'utc'),
  lastupdated_ts    TIMESTAMP             DEFAULT (now() AT TIME ZONE 'utc'),
  owner_pic_url     TEXT
);


Check di attributes dan amount di DoiTrx.create
Status yang bisa final di sini adalah
  . Insufficient Amount
  . Expired Invoice
  . Invalid Amount

Apakah CreateTrx debet ?
Tidak 
Create Trx -> Pengecekan -> Debit Kredit -> Update Trx


- Tidak ada Nama Bank di Detil Transaksi
- Merchant
- Penyedia jasa apakah merchant ?
- Cuma ada satu merchant dulu, yakni doi. Untuk menampung duit yang tidak di teruskan ke mana2 (cth trx service provider)


DIWA-16 


                                             Pay Manual (Invoice#)
    => Home -> Pay/Transfer  -> Barcode or
                                             Transfer Manual (User Acc#)
                                             
Desain untuk inquiry bill pulsa  pascabayar dan listrik prabayar dan pascabayar belum ada. Ini halaman 


Tentang Merchant
================

Alternative (1)
DOI hanya e-money
Merchant tidak harus memiliki wallet
Setiap pembelian item dari merchant, maka uang pembayaran akan disimpan didalam balance merchant.
Uang akan di debet dari balance merchant jika barang sudah sampai ke pembeli.
Jika merchant tidak memiliki wallet, maka uang langsung ditransfer
Jika merchant memiliki wallet, maka merchant bisa memilih apakah balance di transfer ke wallet atau transfer ke bank.
Dengan begini maka harus ada aplikasi lain yang memungkinkan merchant bisa login. Iya, sama seperti admin juga pakai aplikasi lain.
Bagaimana dengan notifikasi?

Alternative (2)
Yang bisa menyimpan doi adalah wallet atau merchant.
Merchant dan Wallet memiliki balance
Merchant harus memiliki Wallet.
Balance merchant hanya bersifat penampungan sementara.
Setiap pembelian item dari merchant, maka uang pembayaran akan disimpan didalam balance merchant.
Uang akan di debet dari balance merchant jika barang sudah sampai ke pembeli.
Merchant bisa memilih apakah uang nya di transfer ke Wallet atau ke bank

Pilihan merchant apakah disimpan di wallet atau transfer langsung ke bank

Permasalahan dengan tanpa beberapa user adalah authentikasi perlu beberapa aplikasi
Kalau dengan satu user, merchant sudah digabung ke wallet
tapi kenapa wallet punya akses token?
Ya supaya ada authentikasi akses nya
